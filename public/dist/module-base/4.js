(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3Hg0":function(e,t,a){"use strict";a.r(t);a("rB9j"),a("hByQ"),a("oVuX"),a("+2oP"),a("sMBO"),a("tkto"),a("x83w"),a("pNMO"),a("4Brf"),a("0oug"),a("ma9I"),a("TeQF"),a("fbCW"),a("pjDv"),a("4mDm"),a("2B1R"),a("pDQq"),a("qePV"),a("zKZe"),a("07d7"),a("5s+n"),a("JfAA"),a("PKPk"),a("LKBx"),a("FZtP"),a("3bBZ");var n=a("wy2R"),i=a.n(n),r=a("QowQ"),s=a.n(r),o=a("46ST"),l=a("PhHJ"),c=(a("yq1k"),a("nLtv"));a("ToJy"),a("SYor");function u(e){var t=e.value,a=e.weight,n=e.hit,r=e.created_at,s=e.updated_at,c=e.locked;this.frontier=3,this.value=void 0,this.weight=void 0,this.locked=!1,this.hit=void 0,this.updated_at=void 0,this.current_at=void 0,this.created_at=i()(),this.load=function(e){var t=e.value,a=e.weight,n=e.hit,r=e.created_at,s=e.updated_at,l=e.locked;this.value=t||"",this.weight=a||5,this.hit=n||1,this.locked=!!l,this.updated_at=s?i()(s,o.b):this.created_at,this.current_at=i()(),this.created_at=r?i()(r,o.b):this.created_at},this.load({value:t,weight:a,hit:n,created_at:r,updated_at:s,locked:c}),this.setValue=function(e){this.value=e,this.hit++;var t=this.current_at.diff(this.updated_at,"days"),a=this.current_at.diff(this.created_at,"days");if(t>0&&t<=this.frontier){var n=t/this.frontier+(this.hit/a>1?.5:0);this.weight=Math.min(this.weight+parseInt("".concat(n)),10)}else if(t>this.frontier){var r=(t-this.frontier)/this.frontier+(this.hit/a>2?-.5:0);this.weight=Math.max(this.weight-parseInt("".concat(r)),1)}this.updated_at=i()()},this.toPreference=function(){return{value:this.value,hit:this.hit,weight:this.weight,locked:this.locked,updated_at:this.updated_at.format(o.b),created_at:this.created_at.format(o.b)}},this.toggle=function(){this.locked=!this.locked},this.isLocked=function(){return this.locked},this.getWeight=function(){return this.weight},this.getUpdatedAt=function(){return this.updated_at},this.getHit=function(){return this.hit},this.toString=function(){return this.value},this.exchange=function(e){this.weight=e.getWeight(),this.hit=e.getHit(),this.updated_at=e.getUpdatedAt()},this.compareTo=function(e){var t=0;if(e){if(this.weight>e.getWeight()?t=1:this.weight===e.getWeight()?this.hit>e.getHit()?t=1:this.hit<e.getHit()&&(t=-1):t=-1,0===t){var a=this.updated_at.diff(e.getUpdatedAt());a>0?t=1:a<0&&(t=-1)}0===t&&(this.value>e.getValue()?t=1:this.value<e.getValue()&&(t=-1))}return t},this.getValue=function(){return this.value},this.isValueOf=function(e){return this.value===e},this.isValueContains=function(e){return!Object(l.j)(this.value)&&this.value.indexOf(e)>-1},this.equals=function(e){return!!e&&this.isValueOf(e.getValue())},this.clone=function(){return new u(this.toPreference())}}function d(e){return e&&Object(l.i)(e)&&e.length>0?e.map((function(e){return new u(e)})):[]}function h(e,t){return t.compareTo(e)}function p(e){return"string"==typeof e}var f=new function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;this.bufferSize=t>0?t:15,this.list=Object(l.i)(e)&&e.length>0?d(e):[],this.load=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return this.bufferSize=t>0?t:15,this.list=Object(l.i)(e)&&e.length>0?d(e):[],this},this.indexOf=function(e){for(var t=0;t<this.list.length;t++)if(p(e)?this.list[t].isValueOf(e):this.list[t].equals(e))return t;return-1},this.get=function(e){return this.list.length>e?this.list[e]:null},this.set=function(e,t){this.list.length>e&&(this.list[e]=t)},this.stepForward=function(e){var t=this.indexOf(e);return t>=1?this.exchange(t,t-1):this},this.exchange=function(e,t){var a=this.get(e);if(a&&!a.isLocked()){a=new u(this.get(e).toPreference());var n=new u(this.get(t).toPreference()),i=a.clone();a.exchange(n),n.exchange(i),this.set(t,a),this.set(e,n)}return this},this.stepBackward=function(e){var t=this.indexOf(e);return t<this.list.length-1?this.exchange(t,t+1):this},this.update=function(e){var t=void 0;p(e)&&!Object(l.j)(e)?(e=e.trim(),t=this.list.find((function(t){return t.isValueOf(e)}))):t=this.list.find((function(t){return t.equals(e)})),t?t.setValue(e):this.add(e)},this.add=function(e){if(p(e)&&!Object(l.j)(e)){var t=new u({value:e=e.trim()});return this.list.push(t),t}return this.list.push(e),e},this.isEmpty=function(){return!this.list||0===this.list.length},this.filter=function(e){return Object(l.j)(e)||(this.list=this.list.filter((function(t){return t.isValueContains(e)}))),this},this.remove=function(e){var t=this.indexOf(e);return t>-1&&this.list.splice(t,1),this},this.toArray=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.list.slice(0,Math.min(this.list.length,this.bufferSize));e&&(t=t.sort(h));var a=t.filter((function(e){return e.isLocked()}));return a.length>0&&(t=a.sort(h).concat(t.filter((function(e){return!e.isLocked()})))),t.map((function(e){return e.toPreference()}))}};function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g={mixins:[c.c],props:{size:{type:String,default:"default"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{required:!0,type:String},name:{required:!0,type:String},dataKey:{required:!0,type:String|Number},bufferSize:{type:Number,default:20}},data:function(){return{search:void 0,autocomplete:void 0}},computed:{prefDtKey:function(){return"_".concat(this.dataKey)},texts:function(){var e=this.bufferSize,t=this.search,a=this.prefDt;return f.load(a(),e).filter(t).toArray().map((function(e){return e.value}))}},watch:{value:function(e){this.autocomplete=e}},methods:{getPreferences:function(){var e=this.userPref,t=this.name;return e[t]?e[t]:{}},prefDt:function(){var e=this.prefDtKey,t=(0,this.getPreferences)();return t[e]?t[e]:[]},handleSearchText:function(e){this.search=e},updateStandardInputPref:function(e){var t=this.dataKey,a=this.prefDtKey,n=this.name,i=this.bufferSize,r=this.getPreferences;if(t&&!this.$isEmpty("".concat(t))&&!this.$isEmpty(e)){var s=r();("object"!==m(s)||Object(l.i)(s))&&(s={}),s.hasOwnProperty(a)||(s[a]=[]);var o=f.load(s[a],i);o.update(e),s[a]=o.toArray(),this.setUserPref(n,s)}},removePrefInput:function(e){var t=this.prefDtKey,a=this.name,n=this.bufferSize,i=this.prefDt,r=(0,this.getPreferences)();r[t]=f.load(i(),n).remove(e).toArray(),this.setUserPref(a,r)},upgrade:function(e){var t=this.prefDtKey,a=this.name,n=this.bufferSize,i=this.prefDt,r=(0,this.getPreferences)();r[t]=f.load(i(),n).stepForward(e).toArray(),this.setUserPref(a,r)},downgrade:function(e){var t=this.prefDtKey,a=this.name,n=this.bufferSize,i=this.prefDt,r=(0,this.getPreferences)();r[t]=f.load(i(),n).stepBackward(e).toArray(),this.setUserPref(a,r)},toggle:function(e){var t=this.prefDtKey,a=this.name,n=this.bufferSize,i=this.prefDt,r=(0,this.getPreferences)(),s=f.load(i(),n);s.get(s.indexOf(e))&&s.get(s.indexOf(e)).toggle(),r[t]=s.toArray(),this.setUserPref(a,r)},handleChange:function(e){var t=this;this.autocomplete=e,this.$emit("input",e),this.$nextTick((function(){t.$emit("change",e)}))},handlePressEnter:function(e){var t=this;setTimeout((function(){return t.$emit("pressEnter",t.value)}),100)},focus:function(){this.$refs.inputPreferenceRef.focus()}},created:function(){this.$isEmpty(this.value)||this.updateStandardInputPref(this.autocomplete=this.value)}},v=(a("YaVS"),a("KHd+")),y=Object(v.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"preference-input-wrapper",class:{"preference-setting":!!e.texts&&e.texts.length>0}},[t("a-auto-complete",{ref:"inputPreferenceRef",staticClass:"preference-autocomplete",attrs:{"data-source":e.texts,size:e.size,backfill:"",disabled:e.disabled,placeholder:e.placeholder},on:{blur:e.updateStandardInputPref,change:e.handleChange,search:e.handleSearchText},model:{value:e.autocomplete,callback:function(t){e.autocomplete=t},expression:"autocomplete"}},[t("a-input",{staticClass:"auto-complete-input",attrs:{size:e.size,placeholder:e.placeholder},on:{pressEnter:e.handlePressEnter},model:{value:e.autocomplete,callback:function(t){e.autocomplete=t},expression:"autocomplete"}})],1),e._v(" "),e.texts&&e.texts.length>0?t("a-popover",{attrs:{title:"常用值管理"}},[t("template",{slot:"content"},[t("a-list",{attrs:{size:"small","data-source":e.prefDt()},scopedSlots:e._u([{key:"renderItem",fn:function(a,n){return t("a-list-item",{},[t("span",{attrs:{slot:"actions"},slot:"actions"},[t("a-icon",{style:{color:a.locked?"#ff7d31":""},attrs:{type:"pushpin"},on:{click:function(t){return e.toggle(a.value)}}}),e._v(" "),n>0&&!a.locked?t("a-icon",{staticStyle:{color:"#4b8ceb"},attrs:{type:"arrow-up"},on:{click:function(t){return e.upgrade(a.value)}}}):e._e(),e._v(" "),n<e.texts.length-1&&!a.locked?t("a-icon",{staticStyle:{color:"#4b8ceb"},attrs:{type:"arrow-down"},on:{click:function(t){return e.downgrade(a.value)}}}):e._e(),e._v(" "),a.locked?e._e():t("a-icon",{staticStyle:{color:"red"},attrs:{type:"delete"},on:{click:function(t){return e.removePrefInput(a.value)}}})],1),e._v("\n\n                    "+e._s(a.value)+"\n                ")])}}],null,!1,3328088497)})],1),e._v(" "),t("a",{attrs:{href:"#"}},[t("a-icon",{staticClass:"texts-setting",attrs:{type:"setting"}})],1)],2):e._e()],1)}),[],!1,null,"d83c7264",null).exports,b={mixins:[c.c],components:{APreferenceInput:y},props:{placement:{type:String,default:"right"},name:{type:String,default:"我的填报模版"},title:{type:String,default:"管理我的填报模版"},placeholder:{type:String,default:"请输入新的模版名称"},activated:{type:Boolean,default:!1},width:{type:Number,default:400},height:{type:Number,default:400},cache:{required:!0,type:String},data:{type:Object},fire:{type:Boolean,default:!1},size:{type:String,default:"default"},icon:{type:String,default:""}},data:function(){return{drawVisible:!1,moreSettings:!1,moreSettingsPayload:void 0,loading:!1,form:{name:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:20,message:"至少两个字，最多20个字",trigger:"blur"}]},selected:void 0}},computed:{cacheDataKey:function(){return"".concat(this.cache,"_data")},list:function(){var e=this.cache,t=this.cacheDataKey,a=this.$isEmpty,n=this.userPref;if(!a(e)){var i=n[t];return i||[]}return[]},horizon:function(){return["top","bottom"].includes(this.placement)}},methods:{getPopupContainer:function(e){return e.parentElement},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("请按要求填写表单！"),!1;e.cacheUserFormData(),e.form.name=""}))},handleClick:function(){this.drawVisible=!0,this.$emit("visible")},cacheUserFormData:function(){var e=this.cache,t=this.cacheDataKey,a=this.$isEmpty,n=this.setUserPref,i=this.data,r=this.userPref,s=this.form;if(!a(e)){var o=r[t],l=o||[];l.push({id:(new Date).getTime(),default:!1,name:s.name,payload:i}),n(t,l)}},removeUserFormData:function(e){var t=this.cache,a=this.cacheDataKey,n=this.$isEmpty,i=this.setUserPref,r=this.userPref;if(!n(t)){var s=r[a];s&&s.length>0&&i(a,s.filter((function(t){return t.id!==e})))}},mergeUserFormData:function(e){var t=this.cache,a=this.cacheDataKey,n=this.$isEmpty,i=this.setUserPref,r=this.data,s=this.userPref;if(!n(t)){var o=s[a],l=o||[],c=l.find((function(t){return t.id===e}));c&&(c.payload=r,i(a,l),this.$message.info("执行成功"))}},applyUserFormData:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cache,i=this.cacheDataKey,r=this.$isEmpty,s=this.userPref;if(!r(n)){var o=s[i].find((function(t){return t.id===e}));if(o){this.drawVisible=!1,this.selected=e;var l=Object.assign({},o);if(o.payload){var c=o.payload,u=c.params,d=c.trans;Object.keys(d).filter((function(e){return d.hasOwnProperty(e)})).forEach((function(e){u.hasOwnProperty(e)||(u[e]=void 0)})),l.payload={params:u,trans:d}}a?this.$nextTick((function(){t.$emit("handle",l)})):setTimeout((function(){return t.$emit("handle",l)}),300)}}},markAsDefault:function(e){var t=this.cache,a=this.cacheDataKey,n=this.$isEmpty,i=this.setUserPref,r=this.userPref;if(!n(t)){var s=r[a],o=s||[],l=o.find((function(t){return t.id===e}));l&&(o.forEach((function(e){e.default=!1})),l.default=!0,i(a,o))}},cancelMarkAsDefault:function(){var e=this.cache,t=this.cacheDataKey,a=this.$isEmpty,n=this.setUserPref,i=this.userPref;if(!a(e)){var r=i[t],s=r||[];s.forEach((function(e){e.default=!1})),n(t,s)}},autoFireDefaultPlan:function(){if(this.fire){var e=this.cache,t=this.cacheDataKey,a=this.$isEmpty,n=this.userPref;if(!a(e)){var i=n[t],r=(i||[]).filter((function(e){return!!e.default}));r&&r.length>0&&this.applyUserFormData(r[0].id,!0)}}},more:function(e){this.moreSettings=!0,this.moreSettingsPayload=e},onload:function(){this.autoFireDefaultPlan()}},created:function(){this.onload()}},_=(a("lXlF"),Object(v.a)(b,(function(){var e=this,t=e._self._c;return t("a-tooltip",{attrs:{placement:"bottom",title:"将当前的查询条件保存为模版，便于下次使用",mouseEnterDelay:1,"get-popup-container":e.getPopupContainer}},[t("a-button",{class:{activated:e.activated},attrs:{loading:e.loading,icon:e.icon,size:e.size},on:{click:e.handleClick}},[e._v(e._s(e.name)+"\n        "),t("a-drawer",{attrs:{placement:e.placement,width:e.width,height:e.height,visible:e.drawVisible,"after-visible-change":function(){}},on:{close:function(){e.drawVisible=!1}}},[t("div",{attrs:{slot:"title"},slot:"title"},[e._t("title",(function(){return[e._v(e._s(e.title))]}),{title:e.title,advance:e.more})],2),e._v(" "),e.$isEmpty(e.cache)?t("a-alert",{attrs:{message:"未配置缓存键",banner:""}}):e._e(),e._v(" "),e.$isEmpty(e.cache)?e._e():t("a-form-model",{ref:"form",attrs:{model:e.form,layout:"horizontal","label-col":{span:4},"wrapper-col":{span:20},rules:e.rules,size:e.size}},[t("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[t("a-preference-input",{attrs:{name:e.cacheDataKey+"_form",placeholder:e.placeholder,"data-key":"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!e.$isEmpty(e.form.name),expression:"!$isEmpty(form.name)"}],attrs:{"wrapper-col":{span:6,offset:6}}},[t("a-button",{attrs:{type:"primary",loading:e.loading,size:e.size},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1),e._v(" "),t("a-divider",[e._v("点击下方模板名称实现快速查询")]),e._v(" "),e.list.length>0?t("div",[e.horizon?t("div",[t("a-tabs",{attrs:{"default-active-key":0,"tab-position":"top"}},e._l(e.list,(function(a,n){return t("a-tab-pane",{key:n,attrs:{tab:a.name}},[e._t("payload",(function(){return[e._v(e._s(a.id+" - "+a.name))]}),{data:a.payload})],2)})),1)],1):t("a-list",{attrs:{size:e.size,"data-source":e.list},scopedSlots:e._u([{key:"renderItem",fn:function(a){return t("a-list-item",{key:a.id,staticClass:"batch-input-helper-list-item"},[t("a",{attrs:{slot:"actions"},slot:"actions"},[t("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1,"get-popup-container":e.getPopupContainer,title:"设为默认方案，页面打开时自动使用该方案查询一次"}},[a.default?e._e():t("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"calendar"},on:{click:function(t){return e.markAsDefault(a.id)}}})],1),e._v(" "),t("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1,"get-popup-container":e.getPopupContainer,title:"取消默认方案，页面打开时将不会自动使用该方案查询"}},[a.default?t("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"carry-out"},on:{click:e.cancelMarkAsDefault}}):e._e()],1),e._v(" "),t("a-popconfirm",{attrs:{placement:"top","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.mergeUserFormData(a.id)}}},[t("template",{slot:"title"},[t("p",[e._v("确定将当前查询条件覆盖并保存到该方案吗？")])]),e._v(" "),t("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1,"get-popup-container":e.getPopupContainer,title:"将当前查询条件覆盖并保存到该方案"}},[t("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"sync"}})],1)],2),e._v(" "),t("a-popover",{attrs:{title:"「"+a.name+"」查询条件预览"}},[t("template",{slot:"content"},[e._t("payload",(function(){return[e._v(e._s(a.id+" - "+a.name))]}),{data:a.payload})],2),e._v(" "),t("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"message"}})],2),e._v(" "),t("a-popconfirm",{attrs:{placement:"top","ok-text":"仍然继续","cancel-text":"取消"},on:{confirm:function(t){return e.removeUserFormData(a.id)}}},[t("template",{slot:"title"},[t("p",[e._v("仍然继续删除吗？删除后不可恢复！")])]),e._v(" "),t("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1,"get-popup-container":e.getPopupContainer,title:"删除当前方案"}},[t("a-icon",{attrs:{type:"close"}})],1)],2)],1),e._v(" "),t("a-button",{attrs:{type:e.selected===a.id?"primary":"",icon:a.default?"check":"",block:"",size:e.size},on:{click:function(t){return e.applyUserFormData(a.id)}}},[e._v(e._s(a.name))])],1)}}],null,!0)})],1):e._e(),e._v(" "),0===e.list.length?t("p",[e._v("还没有创建模版")]):e._e(),e._v(" "),t("a-drawer",{attrs:{placement:e.placement,width:e.width-30,height:e.height-30,closable:!1,visible:e.moreSettings},on:{close:function(){e.moreSettings=!1}}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.moreSettingsPayload&&e.moreSettingsPayload.title?e.moreSettingsPayload.title:"更多设置"))]),e._v(" "),e._t("more",null,{data:e.moreSettingsPayload})],2)],1)],1)],1)}),[],!1,null,"7a79a557",null).exports),w=a("EbCt"),k={mixins:[w.ContainerMixin]},P=Object(v.a)(k,(function(){return(0,this._self._c)("ul",{staticClass:"list"},[this._t("default")],2)}),[],!1,null,"04500774",null).exports,x={mixins:[w.ElementMixin],props:{item:{type:String|Object},size:{type:String,default:"default"}}},S=(a("vIf3"),{components:{ASortList:P,ASortItem:Object(v.a)(x,(function(){var e=this;return(0,e._self._c)("li",{staticClass:"sort-list-item primary-color",class:[e.size,e.disabled?"disabled":""]},[e._t("default",(function(){return[e._v(e._s(e.item))]}),{item:e.item,disabled:e.disabled})],2)}),[],!1,null,"0b4693eb",null).exports},props:{dataSource:{type:Array,default:function(){return[]}},size:{type:String,default:"default"},disabledAttrName:{type:String,default:"disabled"}},computed:{items:{get:function(){return this.dataSource},set:function(e){var t=this;this.$nextTick((function(){t.$emit("change",e)}))}}}}),C=Object(v.a)(S,(function(){var e=this,t=e._self._c;return e.items&&e.items.length>0?t("a-sort-list",{attrs:{lockAxis:"y","press-delay":100},model:{value:e.items,callback:function(t){e.items=t},expression:"items"}},e._l(e.items,(function(a,n){return t("a-sort-item",{key:n,attrs:{index:n,disabled:a.hasOwnProperty(e.disabledAttrName)&&!!a[e.disabledAttrName],item:a,size:e.size}},[e._t("default",(function(){return[e._v(e._s(a))]}),{item:a,disabled:a.hasOwnProperty(e.disabledAttrName)&&!!a[e.disabledAttrName]})],2)})),1):e._e()}),[],!1,null,"6f855209",null).exports,O=(a("TWNs"),a("UxlC"),a("rZ3M"),{name:"divisibleInput",props:{divisible:{type:RegExp,default:function(){return/[~!\\\/@#\$%\^&\*\(\)_\+,\.，。、 ！\|\n\?？\{\}\[\]]+/g}},delimiter:{type:String,default:","},value:{type:String,default:""},size:{type:String,default:""},placeholder:{type:String,default:"请输入内容"}},watch:{value:function(e){this.inputValue=e}},computed:{tooltipText:function(){return"共"+this.inputValue.split(",").filter((function(e){return!!e.trim()})).length+"项"}},data:function(){return{inputValue:this.value}},methods:{onPressEnter:function(e){this.$emit("pressEnter",e)},onChange:function(e){this.inputValue=e.target.value.replaceAll(this.divisible,this.delimiter),this.$emit("input",this.inputValue),this.$emit("change",this.inputValue)},getPopupContainer:function(e){return e.parentElement}},created:function(){this.inputValue=this.value}}),$=Object(v.a)(O,(function(){var e=this,t=e._self._c;return t("a-tooltip",{attrs:{placement:"bottom",title:e.tooltipText,"get-popup-container":e.getPopupContainer}},[t("a-input",{attrs:{size:e.size,placeholder:e.placeholder},on:{pressEnter:e.onPressEnter,change:e.onChange},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)}),[],!1,null,"51248906",null).exports;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var j=o.d+"_criteria",D=o.d+"_table_columns",M={mixins:[c.c],components:{BatchInputHelper:_,ASortable:C,DivisibleInput:$},props:{fire:{type:Boolean,default:!0},plan:{type:Boolean,default:!1},print:{type:Boolean,default:!1},show:{type:Boolean,default:!0},searchConfig:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},autoParams:{type:Object,default:function(){return{}}},exportConfig:{type:Object,default:function(){return{show:!1,url:"",perPage:100}}},showAdvance:{type:Boolean,default:!1},slice:{type:Number,default:5},size:{type:String,default:"small"}},data:function(){return{PREFS_SEARCH_SCHEMA_TPL:o.d,searchConfigOrigin:[],advanced:!1,originParams:{},params:{},cascader_helper:{},cascader:{},select_remote:{},tree_remote:{},load_select_remote:{},load_cascader:{},load_tree_remote:{},exportParams:{page:1,per_page:this.exportConfig.perPage>0?this.exportConfig.perPage:100},exportTotal:0,exportData:[],exportLoading:!1,searchSchema:void 0,TREE_SELECT_SHOW_PARENT:s.a.SHOW_PARENT,isPlanActivated:!1,planParams:{},holdFireForPlan:!1,columnsOrigin:[],planSearchConfig:void 0,planSearchConfigMap:void 0,planTableColumns:void 0,planTableColumnsMap:void 0}},watch:{},computed:{isSingleLine:function(){return this.searchConfig.length<=this.slice},colSpan:function(){return parseInt(24/this.slice)},enableColumns:function(){return!!this.columnsOrigin&&this.columnsOrigin.length>0}},methods:{isArray:l.i,onPlanVisible:function(){this.searchSchema=this.getPlanPayload()},handleAdvanced:function(){var e=this;this.advanced=!this.advanced,this.$nextTick((function(){e.$emit("expand",e.$el.clientHeight)})),this.$nextTick((function(){e.rememberPrefs()}))},findNodeWithTree:function(e,t,a){if(!e)return null;if(e[t]&&e[t]===a)return e;if(e.isLeaf||!e.children)return null;for(var n=0;n<e.children.length;n++){var i=this.findNodeWithTree(e.children[n],t,a);if(i)return i}return null},getPlanPayload:function(){var e=this,t=this,a=Object.assign({},this.params),n={};return Object.keys(a).filter((function(e){return a.hasOwnProperty(e)})).forEach((function(i){var r=e.searchConfig.find((function(e){return e.name===i}));if(r){var s=t.$isEmpty(r.name)?t.$isEmpty(r.label)?"未知属性":r.label:r.name;switch(n[s]={label:r.label,value:a[i],type:r.type},r.type){case"range_date_picker":2===a[i].length&&(a[i]=e.dateFormat(a[i][0])+" ~ "+e.dateFormat(a[i][1]),n[s].value=a[i]);break;case"range_datetime_picker":2===a[i].length&&(a[i]=e.dateTimeFormat(a[i][0])+" ~ "+e.dateTimeFormat(a[i][1]),n[s].value=a[i]);break;case"date_picker":case"month_picker":a[i]=e.dateFormat(a[i],"YYYY-MM"),n[s].value=a[i];break;case"switch":a[i]=a[i]?1:0,n[s].value=a[i];break;case"cascader":var o=t.findNodeWithTree(t.cascader[i]&&t.cascader[i].length>0?t.cascader[i][0]:null,"id",a[i]);n[s].value=o&&o.name?o.name:a[i];break;case"select":if(r.data&&!!r.data.length>0){var c=r.data.find((function(e){return e.value===a[i]}));c&&!t.$isEmpty(c.label)&&(n[s].value=c.label)}break;case"select-remote":if(t.load_select_remote&&t.load_select_remote[i]&&t.load_select_remote[i].data&&t.load_select_remote[i].data.length>0&&a[i])if(Object(l.i)(a[i]))n[s].value=a[i].reduce((function(e,a){var n=t.load_select_remote[i].data.find((function(e){return e.value===a}));return n&&!t.$isEmpty(n.label)&&e.push(n.label),e}),[]);else{var u=t.load_select_remote[i].data.find((function(e){return e.value===a[i]}));u&&!t.$isEmpty(u.label)&&(n[s].value=u.label)}break;case"tree":if(r.data&&!!r.data.length>0){var d=r.data.find((function(e){return e.id===a[i]}));d&&!t.$isEmpty(d.name)&&(n[s].value=d.name)}break;case"tree-remote":if(t.load_tree_remote&&t.load_tree_remote[i]&&t.load_tree_remote[i].data&&t.load_tree_remote[i].data.length>0&&a[i])if(Object(l.i)(a[i]))n[s].value=a[i].reduce((function(e,a){var n=t.load_tree_remote[i].data.find((function(e){return e.id===a}));return n&&!t.$isEmpty(n.name)&&e.push(n.name),e}),[]);else{var h=t.load_tree_remote[i].data.find((function(e){return e.id===a[i]}));h&&!t.$isEmpty(h.name)&&(n[s].value=h.name)}}}})),{params:a,trans:n}},getPlanSearchParams:function(){var e=this.getPlanPayload();return e&&e.params?e.params:{}},initParams:function(){var e=this;Object.keys(this.autoParams).length>0&&(this.params=Object.assign({},this.params,this.autoParams),this.fire&&setTimeout((function(){e.holdFireForPlan||e.search()}),200))},planSearch:function(e){this.isPlanActivated=!0,this.reset(!1),this.planParams=e.payload&&e.payload.params?e.payload.params:{},this.fillBackSearchForm(e.payload),this.holdFireForPlan=!0,this.$emit("searchParams",this.planParams)},fillBackSearchForm:function(e){var t=this,a=e.params,n=e.trans,r=this.load_select_remote,s=this.select_remote,o=this.load_tree_remote,c=this.tree_remote,u=this.load_cascader,d=this.cascader,h=this.cascader_helper;Object.keys(a).filter((function(e){return a.hasOwnProperty(e)})).forEach((function(e){t.$set(t.params,e,a[e]),n.hasOwnProperty(e)&&n[e].type?n[e].type.startsWith("range_date")&&t.$set(t.params,e,a[e].split(" ~ ").reduce((function(e,t){return e.push(i()(t)),e}),[])):t.$set(t.params,e,a[e]),r.hasOwnProperty(e)?Object(l.i)(a[e])?s[e]=a[e].reduce((function(t,a,i){return t.push({value:a,label:n[e].value[i]}),t}),[]):s[e]=[{value:a[e],label:n[e].value}]:o.hasOwnProperty(e)?Object(l.i)(a[e])?c[e]=a[e].reduce((function(t,a,i){return t.push({id:a,name:n[e].value[i]}),t}),c[e]||[]):c[e]=[{id:a[e],name:n[e].value}]:u.hasOwnProperty(e)&&(Object(l.i)(a[e])?d[e]=a[e].reduce((function(t,a,i){return t.push({id:a,name:n[e].value[i]}),t}),d[e]||[]):d[e]&&d[e].length>0?d[e].push({id:a[e],name:n[e].value}):d[e]=[{id:a[e],name:n[e].value}],h[e]=[a[e]])}))},search:function(){this.isPlanActivated=!1;var e=this.getPlanPayload();this.$emit("searchParams",e&&e.params?e.params:{})},reset:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.params=Object.assign({},this.originParams),e&&this.search(),this.resetExport(),this.resetSelect(),this.$emit("reset")},resetSelect:function(){var e=this;Object.keys(this.load_select_remote).forEach((function(t){e.load_select_remote.hasOwnProperty(t)&&(e.load_select_remote[t].data.length>0?e.select_remote[t]=e.load_select_remote[t].data:e.load_select_remote[t].func())})),Object.keys(this.load_tree_remote).forEach((function(t){e.load_tree_remote.hasOwnProperty(t)&&(e.load_tree_remote[t].data.length>0?e.tree_remote[t]=e.load_tree_remote[t].data:e.load_tree_remote[t].func())}))},resetExport:function(){this.exportData=[],this.exportParams={page:1,per_page:this.exportConfig.perPage>0?this.exportConfig.perPage:100},this.exportTotal=0},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return i()(e).format(t)},dateTimeFormat:function(e){return this.dateFormat(e,"YYYY-MM-DD HH:mm:ss")},cascaderChange:function(e,t){this.params[e.name]=t[t.length-1],0===t.length&&(this.params[e.name]=void 0),this.triggerSearch(e)},initSelect:function(e){var t=this,a=this;e.length>0&&e.forEach((function(n){if("cascader"===n.type)a.$set(a.cascader_helper,n.name,void 0),a.cascader[n.name]=[],t.$get(n.data,{data_type:"cascader"}).then((function(e){if(200===e.code&&e.data){var t={};t[n.name]=e.data,a.cascader=Object.assign({},a.cascader,t)}})),a.$set(a.load_cascader,n.name,(function(e){var t=e[e.length-1];t.loading=!0;var i={pid:t.id,data_type:"cascader"};a.$get(n.data,i).then((function(e){t.loading=!1,200===e.code&&e.data&&(t.children=e.data,a.$set(a.cascader,n.name,E(a.cascader[n.name])))}))}));else if("select-remote"===n.type)a.$set(a.load_select_remote,n.name,{loading:!1,data:[],func:a.$lodash.debounce((function(e){a.$set(a.select_remote,n.name,[]);var t={data_type:"select"};a.$isEmpty(e)||(t.keyword=e);var i={};n.hasOwnProperty("reference")&&a.params&&a.params.hasOwnProperty(n.reference)&&(i[n.reference]=a.params[n.reference]),a.load_select_remote[n.name].loading=!0,a.$get(n.data,Object.assign(t,n.params,i)).then((function(e){if(a.load_select_remote[n.name].loading=!1,200===e.code&&e.data){"function"==typeof n.transform&&e.data.forEach((function(e){n.transform(e)})),0===a.load_select_remote[n.name].data.length&&e.data&&e.data.length>0&&(a.load_select_remote[n.name].data=e.data);var t=n.slice||60;e.data&&e.data.length>t?a.$set(a.select_remote,n.name,e.data.slice(0,t)):a.$set(a.select_remote,n.name,e.data)}}))}),200),change:function(t){a.params[n.name]=t,e.filter((function(e){return!!e.reference&&e.reference===n.name})).filter((function(e){return a.load_select_remote.hasOwnProperty(e.name)})).forEach((function(e){a.params.hasOwnProperty(e.name)&&delete a.params[e.name],a.select_remote[e.name]=a.load_select_remote[e.name].data=[],a.load_select_remote[e.name].func()})),a.triggerSearch(n)}}),a.load_select_remote[n.name].func();else if("tree-remote"===n.type){a.$set(a.load_tree_remote,n.name,{data:[],func:function(e){return new Promise((function(t){var i={data_type:"tree"};e&&e.dataRef&&(i.pid=e.dataRef.id);var r={};n.reference&&a.params&&a.params.hasOwnProperty(n.reference)&&(r[n.reference]=a.params[n.reference]),a.$get(n.data,Object.assign(i,n.params,r)).then((function(e){if(200===e.code&&e.data){e.data.length>0&&e.data.forEach((function(e){!e.hasOwnProperty("pId")&&e.hasOwnProperty("pid")&&(e.pId=e.pid)})),"function"==typeof n.transform&&e.data.forEach((function(e){n.transform(e)}));var i=a.$lodash.uniqBy(a.tree_remote[n.name].concat(e.data),"id");a.$set(a.tree_remote,n.name,i),a.load_tree_remote[n.name].data=i}t()})).catch((function(e){return t()}))}))}});var i={};n.reference&&a.params&&a.params.hasOwnProperty(n.reference)&&(i[n.reference]=a.params[n.reference]),a.$set(a.tree_remote,n.name,[]),a.$get(n.data,Object.assign({data_type:"tree"},n.params,i)).then((function(e){200===e.code&&e.data&&(a.load_tree_remote[n.name].data=e.data,a.tree_remote[n.name]=a.tree_remote[n.name].concat(a.load_tree_remote[n.name].data))}))}}))},onChangeText:function(e){this.$isEmpty(e)||this.search()},onChangeNumber:function(e){this.onChangeText(e)},triggerSearch:function(e){e.trigger&&this.search()},download:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"handleExport";if(this.$isEmpty(this.exportConfig.url))return this.$message.error("缺少数据来源地址");this.setSysBusy(this.exportLoading=!0);var n=this.exportParams.page*this.exportParams.per_page,i=Object.assign({},this.isPlanActivated?this.planParams:this.getPlanSearchParams(),Object.assign({},this.autoParams),this.exportParams);this.$get(this.exportConfig.url,i).then((function(e){if(200===e.code&&e.data){if(e.data.total>0&&(t.exportTotal=e.data.total),t.exportData=t.exportData.concat(e.data.data),n<t.exportTotal)return t.exportParams.page++,t.download(t,a);t.setSysBusy(t.exportLoading=!1),t.$emit(a,{data:t.exportData,params:i}),t.resetExport()}else t.setSysBusy(t.exportLoading=!1),t.resetExport()}),(function(e){t.$message.error("数据加载失败"),t.setSysBusy(t.exportLoading=!1),t.resetExport()}))},printExport:function(){this.download(this,"handlePrintExport")},rememberPrefs:function(){var e,t=null!==(e=this.getUserPref(o.f))&&void 0!==e?e:{};t.expand=this.advanced,this.setUserPref(o.f,t)},initPlan:function(){this.planSearchConfigMap=this.searchConfig.reduce((function(e,t){return t.checked=!t.hasOwnProperty("checked")||t.checked,e[t.name]=t,e}),{}),this.initPlanSearchConfig(),this.planTableColumnsMap=this.columns.reduce((function(e,t){return e[t.key]=t,e}),{}),this.initPlanTableColumns()},initPlanSearchConfig:function(){this.planSearchConfig=this.searchConfigOrigin.map((function(e){return{name:e.name,checked:e.checked}}));var e=this.getViewPref(j);if(e&&Object(l.i)(e)&&e.length>0){var t=this.$lodash.differenceBy(e,this.planSearchConfig,"name");t&&t.length>0?this.onChangePlanSearchConfig(e.concat(t),!1):this.onChangePlanSearchConfig(e,!1)}else this.onChangePlanSearchConfig(this.planSearchConfig,!1)},initPlanTableColumns:function(){this.planTableColumns=this.columnsOrigin.filter((function(e){return!e.hasOwnProperty("disabled")||!e.disabled})).map((function(e){return{checked:!e.hasOwnProperty("checked")||e.checked,disabled:e.hasOwnProperty("disabled")?!!e.disabled:!!e.hasOwnProperty("fixed")&&!!e.fixed,fixed:!!e.hasOwnProperty("fixed")&&e.fixed,key:e.key}}));var e=this.getViewPref(D);if(e&&Object(l.i)(e)&&e.length>0){var t=this.$lodash.differenceBy(e,this.planTableColumns,"key");t&&t.length>0?this.onChangePlanTableColumns(e.concat(t&&t.length>0?t.filter((function(e){return!e.hasOwnProperty("disabled")||!e.disabled})):[]),!1):this.onChangePlanTableColumns(e,!1)}else this.planTableColumns.forEach((function(e){return e.fixed=!1})),this.onChangePlanTableColumns(this.planTableColumns,!1)},onClickPlanMore:function(e,t){var a=this;if(t&&t.advance&&T(t.advance))switch(e.key){case"0":t.advance({title:"高级设置-搜索条件",view:e.key});break;case"1":t.advance({title:"高级设置-表头",view:e.key});break;case"2":this.$confirm({title:"你确定要还原查询条件到默认设置吗？",content:"确定还原后，可再次重新设置，是否继续",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){a.setViewPref(j,void 0),a.initPlanSearchConfig()}});break;case"3":this.$confirm({title:"你确定要还原表头到默认设置吗？",content:"确定还原后，可再次重新设置，是否继续",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){a.setViewPref(D,void 0),a.initPlanTableColumns()}})}},onChangePlanSearchConfig:function(e){var t,a=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(this.planSearchConfig=e).filter((function(e){return e.checked&&a.planSearchConfigMap.hasOwnProperty(e.name)&&!!a.planSearchConfigMap[e.name]})).map((function(e){var t=a.planSearchConfigMap[e.name];return t.checked=!0,t}));i.length>0&&(t=this.searchConfig).splice.apply(t,[0,this.searchConfig.length].concat(E(i)));n&&this.setViewPref(j,e)},onChangePlanTableColumns:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(this.planTableColumns=e).filter((function(e){return!!e.checked&&t.planTableColumnsMap.hasOwnProperty(e.key)&&!!t.planTableColumnsMap[e.key]})).map((function(e){var a=t.planTableColumnsMap[e.key];return e.hasOwnProperty("fixed")&&(a.fixed=e.fixed,a.hasOwnProperty("disabled")&&a.disabled||(e.disabled=!!e.fixed)),a}));if(n.length>0){var i=this.columns.filter((function(e){return e.hasOwnProperty("disabled")&&!!e.disabled}));this.$nextTick((function(){var e;(e=t.columns).splice.apply(e,[0,t.columns.length].concat(E(n)))})),i&&i.length>0&&this.$nextTick((function(){var e;(e=t.columns).splice.apply(e,[t.columns.length,0].concat(E(i)))}))}a&&this.setViewPref(D,e)},onload:function(){var e=this;this.searchConfigOrigin=[].concat(this.searchConfig),this.columnsOrigin=[].concat(this.columns),this.initParams(),this.initSelect(this.searchConfig),this.initPlan(),this.searchConfigOrigin.length<=0&&(this.show=!1),this.originParams=this.autoParams;var t=this.getUserPref(o.f)||{};this.advanced=!!t.expand,!this.advanced&&this.showAdvance&&(this.advanced=this.showAdvance),this.$nextTick((function(){e.$emit("expand",e.$el.clientHeight)}))}},created:function(){this.onload()},mounted:function(){}},R=(a("7zUT"),Object(v.a)(M,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"search",staticClass:"admin_table_page_where",class:[e.size,e.advanced?"more":"less"],attrs:{dusk:"admin-search"}},[t("a-form",{directives:[{name:"show",rawName:"v-show",value:e.advanced,expression:"advanced"}],attrs:{layout:"inline"},model:{value:e.params,callback:function(t){e.params=t},expression:"params"}},[t("a-row",{attrs:{gutter:12,type:"flex"}},[e._l(e.searchConfig,(function(a,n){return a.checked?t("a-col",{directives:[{name:"show",rawName:"v-show",value:n<e.slice||e.advanced,expression:"k < slice || advanced"}],key:n,attrs:{xs:24,sm:12,md:a.span&&a.span>0?a.span:e.colSpan,lg:a.span&&a.span>0?a.span:e.colSpan,xl:a.span&&a.span>0?a.span:e.colSpan}},[t("a-form-item",{attrs:{label:a.label}},["text"===a.type?t("a-input",{attrs:{size:e.size,placeholder:a.placeholder||"请输入"+a.label,dusk:"admin-".concat(a.name)},on:{pressEnter:e.onChangeText},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"div-text"===a.type||"divisible-text"===a.type?t("divisible-input",{attrs:{size:e.size,placeholder:a.placeholder||"请输入"+a.label,dusk:"admin-".concat(a.name)},on:{pressEnter:e.onChangeText},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"number"===a.type?t("a-input-number",{staticStyle:{width:"100%"},attrs:{size:e.size,max:a.max,min:a.min,dusk:"admin-".concat(a.name)},on:{pressEnter:e.onChangeNumber},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"select"===a.type?t("a-select",{attrs:{mode:a.mode?a.mode:"default",size:e.size,dusk:"admin-".concat(a.name),placeholder:a.placeholder||""},on:{change:function(t){return e.triggerSearch(a)}},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}},e._l(a.data,(function(a,n){return t("a-select-option",{key:n,attrs:{value:a.value}},[e._v(e._s(a.label))])})),1):e._e(),e._v(" "),"checkbox"===a.type?t("a-checkbox-group",{attrs:{size:e.size,options:a.data},on:{change:function(t){return e.triggerSearch(a)}},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"select-remote"===a.type?t("a-select",{attrs:{size:e.size,"allow-clear":"",mode:a.mode?a.mode:"default","show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":"没有找到更多数据",loading:e.load_select_remote.loading,dusk:"admin-".concat(a.name),placeholder:a.placeholder||"请选择"+a.label},on:{search:function(t){return e.load_select_remote[a.name].func(t)},change:function(t){return e.load_select_remote[a.name].change(t)}},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}},e._l(e.select_remote[a.name],(function(n,i){return e.select_remote[a.name].length>0?t("a-select-option",{key:i,attrs:{value:n.value}},[e._v(e._s("function"==typeof a.dataFormat?a.dataFormat(n):n.label))]):e._e()})),1):e._e(),e._v(" "),"switch"===a.type?t("a-switch",{attrs:{size:e.size,"checked-children":a.checked||"开","un-checked-children":a.unchecked||"关"},on:{change:function(t){return e.triggerSearch(a)}},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"cascader"===a.type?t("a-cascader",{staticStyle:{width:"100%"},attrs:{dusk:"admin-".concat(a.name),size:e.size,"load-data":e.load_cascader[a.name],options:e.cascader[a.name],fieldNames:{label:"name",value:"id",children:"children"},placeholder:a.placeholder||"请选择"+a.label,"change-on-select":""},on:{change:function(t){return e.cascaderChange(a,t)}},model:{value:e.cascader_helper[a.name],callback:function(t){e.$set(e.cascader_helper,a.name,t)},expression:"cascader_helper[v.name]"}}):e._e(),e._v(" "),"time_picker"===a.type?t("a-time-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,"allow-clear":!a.clear},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"date_picker"===a.type?t("a-date-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","allow-clear":!a.clear},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"month_picker"===a.type?t("a-date-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,format:"YYYY-MM","value-format":"YYYY-MM","allow-clear":!a.clear},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"range_date_picker"===a.type?t("a-range-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","allow-clear":!a.clear},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"range_datetime_picker"===a.type?t("a-range-picker",{staticStyle:{width:"100%"},attrs:{size:e.size,format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss","show-time":"","allow-clear":!a.clear},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"tree"===a.type?t("a-tree-select",{staticStyle:{width:"100%"},attrs:{size:e.size,placeholder:a.placeholder||"请选择"+a.label,"dropdown-style":{maxHeight:"400px",overflow:"auto"},"replace-fields":a.fields||{children:"children",title:"name",key:"id",value:"id"},"tree-data":a.data,"tree-checkable":"","show-checked-strategy":a.strategy||e.TREE_SELECT_SHOW_PARENT},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e(),e._v(" "),"tree-remote"===a.type?t("a-tree-select",{staticStyle:{width:"100%"},attrs:{size:e.size,"tree-data-simple-mode":"",placeholder:a.placeholder||"请选择"+a.label,"dropdown-style":{maxHeight:"400px",overflow:"auto"},"replace-fields":a.fields||{children:"children",title:"name",key:"id",value:"id"},"tree-data":e.tree_remote[a.name],"load-data":e.load_tree_remote[a.name].func,"tree-checkable":"","show-checked-strategy":a.strategy||e.TREE_SELECT_SHOW_PARENT},model:{value:e.params[a.name],callback:function(t){e.$set(e.params,a.name,t)},expression:"params[v.name]"}}):e._e()],1)],1):e._e()})),e._v(" "),t("a-col",{attrs:{flex:"auto"}},[t("span",{staticClass:"table-page-search-submit-buttons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{icon:"search",size:e.size,dusk:"admin-search-button"},on:{click:e.search}},[e._v("查询")]),e._v(" "),!e.$isEmpty(e.exportConfig.url)&&e.exportConfig.show?t("a-button",{attrs:{size:e.size,loading:e.exportLoading},on:{click:e.download}},[e._v("导出")]):e._e(),e._v(" "),e.plan?t("batch-input-helper",{attrs:{activated:e.isPlanActivated,fire:"",name:"方案",placement:"right",title:"管理我的查询方案",placeholder:"请输入查询方案的名称",cache:e.PREFS_SEARCH_SCHEMA_TPL+"_"+e.$route.name,data:e.searchSchema,width:480,height:2*e.sysWindowHeight/3,size:e.size},on:{visible:e.onPlanVisible,handle:e.planSearch},scopedSlots:e._u([{key:"payload",fn:function(a){var n=a.data;return t("div",{},[n&&n.trans?t("a-list",{attrs:{"data-source":Object.keys(n.trans),size:e.size},scopedSlots:e._u([{key:"renderItem",fn:function(a,i){return t("a-list-item",{},[t("a-list-item-meta",{attrs:{description:e.isArray(n.trans[a].value)?n.trans[a].value.join(", "):n.trans[a].value}},[t("span",{staticClass:"primary-color",attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.trans[a].label))])])],1)}}],null,!0)}):e._e()],1)}},{key:"title",fn:function(a){return t("div",{},[e._v("\n                            "+e._s(a.title)+"\n                            "),t("div",{staticStyle:{float:"right","margin-right":"35px"}},[t("a-divider",{attrs:{type:"vertical"}}),e._v(" "),t("a-dropdown",{attrs:{trigger:["click"],size:e.size}},[t("a-button",{attrs:{type:"link",size:e.size},on:{click:function(e){return e.preventDefault()}}},[e._v("\n                                        高级 "),t("a-icon",{attrs:{type:"down"}})],1),e._v(" "),t("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.onClickPlanMore(t,a)}},slot:"overlay"},[t("a-menu-item",{key:"0"},[t("a-icon",{attrs:{type:"file-search"}}),e._v("\n                                            搜索条件\n                                        ")],1),e._v(" "),t("a-menu-divider"),e._v(" "),t("a-menu-item",{key:"1",attrs:{disabled:!e.enableColumns}},[t("a-icon",{attrs:{type:"table"}}),e._v("\n                                            表头列\n                                        ")],1),e._v(" "),t("a-menu-divider"),e._v(" "),t("a-menu-item",{key:"2"},[t("a-icon",{staticClass:"primary-color",attrs:{type:"reload"}}),e._v("\n                                            还原搜索条件\n                                        ")],1),e._v(" "),t("a-menu-item",{key:"3",attrs:{disabled:!e.enableColumns}},[t("a-icon",{staticClass:"primary-color",attrs:{type:"reload"}}),e._v("\n                                            还原表头列\n                                        ")],1)],1)],1)],1)])}},{key:"more",fn:function(a){return a&&a.data?t("div",{staticStyle:{overflow:"hidden scroll"},style:{height:e.sysWindowHeight-100+"px"}},["0"===a.data.view?t("a-sortable",{attrs:{"data-source":e.planSearchConfig,size:e.size},on:{change:e.onChangePlanSearchConfig},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.item;return t("div",{},[e._v("\n                                    "+e._s(e.planSearchConfigMap&&e.planSearchConfigMap.hasOwnProperty(n.name)&&e.planSearchConfigMap[n.name]&&e.planSearchConfigMap[n.name].hasOwnProperty("label")&&!e.$isEmpty(e.planSearchConfigMap[n.name].label)?e.planSearchConfigMap[n.name].label:"")+"\n                                    "),t("a-checkbox",{staticStyle:{float:"right","margin-right":"10px"},on:{change:function(t){return e.onChangePlanSearchConfig(e.planSearchConfig)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"item.checked"}}),e._v(" "),e.planSearchConfigMap&&e.planSearchConfigMap.hasOwnProperty(n.name)&&e.planSearchConfigMap[n.name]&&e.planSearchConfigMap[n.name].hasOwnProperty("desc")&&!e.$isEmpty(e.planSearchConfigMap[n.name].desc)?t("span",{staticStyle:{"margin-left":"35px"}},[e._v("\n                                        "+e._s(e.planSearchConfigMap[n.name].desc)+"\n                                    ")]):e._e()],1)}}],null,!0)}):e._e(),e._v(" "),e.enableColumns&&"1"===a.data.view?t("a-sortable",{attrs:{"data-source":e.planTableColumns,size:e.size},on:{change:e.onChangePlanTableColumns},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.item;return[a.disabled?t("a-icon",{attrs:{type:"stop"}}):e._e(),e._v("  \n                                    "+e._s(e.planTableColumnsMap&&e.planTableColumnsMap.hasOwnProperty(n.key)&&e.planTableColumnsMap[n.key]&&e.planTableColumnsMap[n.key].hasOwnProperty("title")&&!e.$isEmpty(e.planTableColumnsMap[n.key].title)?e.planTableColumnsMap[n.key].title:"")+"\n                                    "),t("a-checkbox",{staticStyle:{float:"right","margin-right":"10px"},on:{change:function(t){return e.onChangePlanTableColumns(e.planTableColumns)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"item.checked"}}),e._v(" "),t("a-radio-group",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:e.size},on:{change:function(t){return e.onChangePlanTableColumns(e.planTableColumns)}},model:{value:n.fixed,callback:function(t){e.$set(n,"fixed",t)},expression:"item.fixed"}},[t("a-radio-button",{attrs:{value:"left"}},[e._v("左")]),e._v(" "),t("a-radio-button",{attrs:{value:!1}},[e._v("中")]),e._v(" "),t("a-radio-button",{attrs:{value:"right"}},[e._v("右")])],1)]}}],null,!0)}):e._e()],1):e._e()}}],null,!0)}):e._e(),e._v(" "),e._t("buttons"),e._v(" "),e.print&&!e.$isEmpty(e.exportConfig.url)?t("a-button",{attrs:{size:e.size,disabled:e.exportLoading},on:{click:e.printExport}},[e._v("打印")]):e._e(),e._v(" "),t("a-button",{attrs:{size:e.size},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e.isSingleLine?e._e():t("a",{staticStyle:{"margin-left":"8px"},attrs:{dusk:"admin-search-advance"},on:{click:e.handleAdvanced}},[e._v("\n                        "+e._s(e.advanced?"收起":"展开")+"\n                        "),t("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1),e._v(" "),e._t("actions")],2)])],2)],1),e._v(" "),e.advanced?e._e():t("a-button",{staticClass:"mini",attrs:{type:"primary",icon:"search",ghost:"",size:e.size},on:{click:e.handleAdvanced}},[e._v("查询")]),e._v(" "),e.advanced?e._e():t("a-divider",{attrs:{type:"vertical"}})],1)}),[],!1,null,"7be0f8dc",null).exports),A={mixins:[c.b,c.c],components:{Search:R},props:{},data:function(){return{table:{actions:{list:this.$api.adminModules,remove:this.$api.adminModules},columns:[{title:"#",dataIndex:"id",width:80,key:"id",ellipsis:!0},{title:"名称",dataIndex:"name",width:80,key:"name",ellipsis:!0},{title:"别名",dataIndex:"alias",width:80,key:"alias",ellipsis:!0},{title:"描述",dataIndex:"description",width:180,key:"description",ellipsis:!0},{title:"优先级",dataIndex:"priority",width:80,key:"priority",ellipsis:!0},{title:"版本号",dataIndex:"version",width:80,key:"version",ellipsis:!0},{title:"安装路径",dataIndex:"path",width:180,key:"path",ellipsis:!0},{title:"类型",dataIndex:"type",width:80,key:"type",ellipsis:!0},{title:"排序",dataIndex:"sort",width:80,key:"sort",ellipsis:!0},{title:"状态",dataIndex:"status",width:80,key:"status",ellipsis:!0},{title:"创建时间",dataIndex:"created_at",width:80,key:"created_at",ellipsis:!0},{title:"更新时间",dataIndex:"updated_at",width:80,key:"updated_at",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"action"},width:100,key:"action"}]},search:{fields:[{label:"名称",name:"name",type:"text"}]},loading_status:{}}},watch:{},computed:{},methods:{onload:function(){this.loadTableData()}},created:function(){this.onload()},mounted:function(){}},I=Object(v.a)(A,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"admin_table_page_title"},[e._v("模块化列表")]),e._v(" "),t("div",{staticClass:"unline underm"}),e._v(" "),t("div",{staticClass:"admin_table_list"},[t("a-table",{attrs:{size:e.sysSize,components:e.resizeableTitleComponents,columns:e.getCachedTableColumns(e.table.columns),"data-source":e.table.data,scroll:{y:e.sysWindowHeight-280},loading:e.table.loading,pagination:!1,"row-selection":{columnWidth:25,selectedRowKeys:e.table.selectedRowKeys,onChange:e.handleTableRowKeysChange},"row-key":e.table.rowId},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"title",fn:function(a){return[t("search",{attrs:{"search-config":e.search.fields,"auto-params":e.search.params,"export-config":e.exporting},on:{searchParams:e.handleTableSearchParams,handleExport:e.handleTableExport}}),e._v(" "),t("div",{staticClass:"admin_table_handle_btn"},[t("a-button",{attrs:{type:"primary",size:e.sysSize,icon:"plus"},on:{click:function(t){e.$router.push(e.$moduleUrl("modules/form"))}}},[e._v("添加")]),e._v(" "),e.$isEmpty(e.table.actions.remove)?e._e():t("a-button",{staticClass:"admin_delete_btn",attrs:{size:e.sysSize,type:"danger",icon:"delete"},on:{click:e.handleRemoveTableRows}},[e._v("批量删除")])],1)]}},{key:"action",fn:function(a){return t("span",{},[t("a-button",{attrs:{type:"link",icon:"edit",size:e.sysSize},on:{click:function(t){e.$router.push(e.$moduleUrl("modules/form/"+a.id))}}},[e._v("编辑")])],1)}}])}),e._v(" "),e.table.total>0?t("div",{staticClass:"admin_pagination"},[t("a-pagination",{attrs:{size:e.sysSize,"page-size-options":e.table.pageSizeOptions,total:e.table.total,"show-total":function(e){return"共 ".concat(e," 条")},"show-less-items":"","show-size-changer":"","show-quick-jumper":"","page-size":e.table.params.per_page},on:{change:e.handleTablePageChange,showSizeChange:e.handleTablePageSizeChange},model:{value:e.table.params.page,callback:function(t){e.$set(e.table.params,"page",t)},expression:"table.params.page"}})],1):e._e()],1)])}),[],!1,null,"0c577c22",null);t.default=I.exports},"7zUT":function(e,t,a){"use strict";a("uHGB")},BSyc:function(e,t,a){var n=a("G9Jw");"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,i);n.locals&&(e.exports=n.locals)},G9Jw:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".ant-divider-horizontal.ant-divider-with-text-center[data-v-7a79a557]{color:#aaa}.activated[data-v-7a79a557]{animation:antFadeIn 1s linear infinite;-webkit-animation:antFadeIn 1s linear infinite;-moz-animation:antFadeIn 1s infinite linear}",""])},YaVS:function(e,t,a){"use strict";a("yP2Y")},Ypge:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".sort-list-item[data-v-0b4693eb]{list-style-type:none;cursor:pointer;background:#fff;border-bottom:1px solid #eee;-webkit-user-select:none;-moz-user-select:none;user-select:none;visibility:visible!important}.sort-list-item.large[data-v-0b4693eb]{padding:30px}.sort-list-item.default[data-v-0b4693eb]{padding:20px}.sort-list-item.small[data-v-0b4693eb]{padding:10px}",""])},ZlJl:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".unlock[data-v-7be0f8dc]{color:#bdbecb}.admin_table_page_where.less[data-v-7be0f8dc]{display:inline}",""])},iHd1:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".preference-input-wrapper[data-v-d83c7264]{position:relative;width:100%}.preference-input-wrapper .preference-autocomplete[data-v-d83c7264]{width:100%;height:30px;transition:all}.preference-input-wrapper .texts-setting[data-v-d83c7264]{position:absolute;top:0;bottom:0;right:0;margin:auto;height:15px;cursor:pointer}.preference-input-wrapper.preference-setting[data-v-d83c7264]{padding-right:18px}.preference-input-wrapper[data-v-d83c7264] .ant-input{height:100%}",""])},lXlF:function(e,t,a){"use strict";a("BSyc")},nLtv:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return $}));a("pNMO"),a("4Brf"),a("0oug"),a("gXIK"),a("ma9I"),a("TeQF"),a("fbCW"),a("yq1k"),a("4mDm"),a("oVuX"),a("2B1R"),a("7+zs"),a("qePV"),a("zKZe"),a("5DmW"),a("27RR"),a("tkto"),a("07d7"),a("rB9j"),a("JTJg"),a("PKPk"),a("hByQ"),a("FZtP"),a("3bBZ");var n=a("wy2R"),i=a.n(n),r=a("PhHJ"),s=a("L2JU"),o=a("46ST");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=Object(s.a)(o.k),p=Object(s.a)(o.j),f={data:function(){return this.resizeableTitleComponents={header:{cell:r.c.bind(this)}},{table:{rowId:"id",actions:{list:"",remove:""},params:{page:1,per_page:30},pageSizeOptions:["10","20","30","40","50","100","200","500"],total:0,loading:!1,expand:!1,selectedRowKeys:[],expandedRowKeys:[],columns:[{title:"名称",dataIndex:"name",width:120}],data:[],transform:function(e){return e},getRowClassName:function(e,t){return t%2==0?"report-light-row":""},afterLoadTableDataSuccess:function(){}},search:{height:0,fields:[{label:"名称",name:"name",type:"text"}],params:{},quickSearch:!1,quick:{data:[],selected:void 0,params:{}}},exporting:{show:!0,url:"",perPage:100,fileName:"数据导出",sheetName:"New Sheet",columns:[],transform:function(e){return e},transformColumns:function(e){return[]}}}},computed:u(u(u({},h.mapGetters(["isLogin","userInfo"])),p.mapGetters({sysWindowHeight:"height",sysIsBusy:"isBusy",userPref:"pref"})),{},{hasCheckedRows:function(){return this.table.selectedRowKeys.length>0},allTableSelectedRows:function(){var e=this;return this.hasCheckedRows&&this.table.data&&this.table.data.length>0?this.table.data.filter((function(t){return e.table.selectedRowKeys.includes(t[e.table.rowId])})):[]},allTableCheckedRows:function(){var e=this.hasCheckedRows,t=this.table,a={};return e&&t.selectedRowKeys&&t.selectedRowKeys.length>0?t.selectedRowKeys.reduce((function(e,t){return e["_".concat(t)]=!0,e}),a):a}}),methods:u(u({},p.mapActions({setSysBusy:"gettingBusy",setUserPrefs:"setPref"})),{},{handleTableSearchParams:function(e){this.search.params=e,this.resetPage(),this.loadTableQuickSearch(),this.loadTableData()},handleTableRowKeysChange:function(e){this.table.selectedRowKeys=e},handleTablePageChange:function(e){this.resetPage(e),this.loadTableData()},handleTablePageSizeChange:function(e,t){this.table.params.per_page=t,this.loadTableData()},handleSearchExpanded:function(e){this.search.height=e},handleRemoveTableRows:function(){var e=this;return 0===this.table.selectedRowKeys.length?this.$message.error("未选择数据."):this.$isEmpty(this.table.actions.remove)?this.$message.error("未定义接口."):void this.$confirm({title:"你确定要删除选择的数据？",content:"确定删除后无法恢复.",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){var t=e.table.selectedRowKeys.join(",");e.$delete(e.table.actions.remove+"/"+t).then((function(t){200===t.code?(e.table.selectedRowKeys=[],e.afterRemoveTableRowsSuccessfully(t.data),e.$message.success(t.msg||"删除成功")):e.$message.error(t.msg)}))}})},handleTableExport:function(e){var t=e.data,a=e.params;if(t&&t.length>0){if(!(t=this.exporting.transform(t))||0===t.length)return this.$message.error("没有找到更多数据");var n=this.exporting.columns&&this.exporting.columns.length>0?this.exporting.columns:this.exporting.transformColumns(t.concat([]),Object.assign({},this.search.params,a));if(!n||0===n.length)return this.$message.error("没有找到列的配置");Object(r.d)({data:t,columns:n,fileName:i()().format(o.a)+"_"+this.exporting.fileName,sheetName:this.exporting.sheetName})}},handleTablePrintExport:function(e){e.data,e.params},syncTableData:function(e){e&&e.length>0&&this.table.data.forEach((function(t){var a=e.find((function(e){return e.id===t.id}));a&&Object.keys(a).forEach((function(e){a.hasOwnProperty(e)&&(t[e]=a[e])}))}))},loadTableData:function(){var e=this;this.$isEmpty(this.table.actions.list)?this.$message.error("未定义数据源."):(this.table.loading=!0,this.$get(this.table.actions.list,Object.assign({},this.search.params,this.table.params,this.search.quick.params)).then((function(t){e.table.data=[];var a=e.table.expandedRowKeys;if(e.table.expand&&(e.table.expandedRowKeys=[]),200===t.code){if(t.data)if(e.table.total=t.data.total,e.table.data=e.table.transform(t.data.data),e.table.expand&&e.table.data&&e.table.data.length>0){var n=e.table.data.map((function(e){return e.id}));e.$nextTick((function(){n&&n.length>0?e.table.expandedRowKeys=n:e.table.expandedRowKeys=a}))}else e.table.expandedRowKeys=a;e.table.afterLoadTableDataSuccess()}else e.$message.error(t.msg);e.table.loading=!1}),(function(t){e.$message.error(t),e.table.loading=!1})))},handleChangeTableQuickSearch:function(e){this.search.quickSearch&&this.search.quick.data&&this.search.quick.data.length>e?(this.search.quick.selected=e,this.search.quick.params=this.search.quick.data[e]?this.search.quick.data[e].params:{},this.resetPage(),this.loadTableData()):this.search.quick.params={}},loadTableQuickSearch:function(){var e=this;!this.$isEmpty(this.table.actions.list)&&this.search.quickSearch&&this.$get(this.table.actions.list+"?data_type=quick",Object.assign({},this.search.params,this.table.params)).then((function(t){e.search.quick.data=[],200===t.code&&t.data?e.search.quick.data=t.data:e.$message.error(t.msg)}),(function(t){e.$message.error(t)}))},handleTableChange:function(e,t,a){this.table.params.sorter_field=void 0,this.table.params.sorter_order=void 0,this.$isEmpty(a.columnKey)||(this.table.params.sorter_field=a.column.field||a.columnKey,this.$isEmpty(a.order)||(this.table.params.sorter_order=a.order),this.loadTableData())},onTableQuickEdit:function(e){var t=this,a=e.key,n=e.value;this.table.selectedRowKeys.length>0&&this.table.data.filter((function(e){return t.table.selectedRowKeys.includes(e[t.table.rowId])})).forEach((function(e){return e.hasOwnProperty(a)&&!t.$isEmpty(e[a]=n)}))},afterRemoveTableRowsSuccessfully:function(e){this.loadTableData()},resetPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.table.params.page=e},cacheTableColumnWidth:function(e,t){if(e&&e.key&&t>0){var a={};this.userPref[o.g]&&(a=this.userPref[o.g]),a[e.key]=t;var n={};n[o.g]=a,this.setUserPrefs(n)}},getTableColumnWidth:function(e){var t=this.userPref[o.g],a=0;return(a=t&&t.hasOwnProperty(e.key)?t[e.key]:e.width)>0?a:80},getCachedTableColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.table.columns;return t&&t.length>0&&t.forEach((function(t){t.width=e.getTableColumnWidth(t)})),t},listenToMessageFormUpdated:function(){var e=this,t=this.getFormUpdatedEventbusName();Object(r.i)(t)?t.forEach((function(t){e.$isEmpty(t)||e.$bus.$on(t+"_msg_form_updated",e.onRouterFormUpdated)})):this.$isEmpty(t)||this.$bus.$on(t+"_msg_form_updated",this.onRouterFormUpdated)},getFormUpdatedEventbusName:function(){return this.$router.currentRoute&&this.$router.currentRoute.meta&&!this.$isEmpty(this.$router.currentRoute.meta.form)?this.$router.currentRoute.meta.form:""},onRouterFormUpdated:function(e){this.loadTableData()}}),mounted:function(){this.listenToMessageFormUpdated()}},m=a("KHd+"),g=Object(m.a)(f,void 0,void 0,!1,null,null,null).exports;a("sMBO");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y={methods:{sendMessageFormUpdated:function(){this.$router.currentRoute&&!this.$isEmpty(this.$router.currentRoute.name)&&this.$bus.$emit(this.$router.currentRoute.name+"_msg_form_updated",{})},syncPrefForm:function(){var e=this.getFormPrefName();if(!this.$isEmpty(e)){var t=this.userPref[e];this.form&&t&&Object(r.a)(this.form,t)}},handlePrefForm:function(e){return e},getFormPrefName:function(){return""},writePrefForm:function(){var e=this.getFormPrefName();this.$isEmpty(e)||this.setUserPref(e,this.handlePrefForm(this.form))},__setFormProp:function(e,t){return e&&this.form&&"object"===v(this.form)&&this.form.hasOwnProperty(e)&&this.$set(this.form,e,t),t}},created:function(){}},b=Object(m.a)(y,void 0,void 0,!1,null,null,null).exports;a("UxlC");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=Object(s.a)(o.k),S=Object(s.a)(o.j),C=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]/gi,O={computed:k(k({},x.mapGetters(["isLogin","userInfo"])),S.mapGetters({sysWindowHeight:"height",sysWindowWidth:"width",sysSize:"size",sysIsBusy:"isBusy",userPref:"pref",readUserPref:"getPref",userNotificationCount:"notification"})),methods:k(k(k({},S.mapActions({setSysBusy:"gettingBusy",setUserPrefs:"setPref",clearUserPref:"clearPref",setUserNotificationCount:"setNotification"})),x.mapActions({updateUserInfo:"update"})),{},{getSysWindowHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.$store.state.adminCommon.height+e},setUserPref:function(e,t){if("string"==typeof e){var a={};a[e]=t,this.setUserPrefs(a)}else console.error("unable to set user preference value with key",e)},setViewPref:function(e,t){var a=this.$route.name;"string"!=typeof e||"string"!=typeof a||this.$isEmpty(a)?console.log("no view name from vue route",e):this.setUserPref(a.replace(C,"_")+"_"+e,t)},getUserPref:function(e){return"string"==typeof e?this.readUserPref(e):null},getViewPref:function(e){var t=this.$route.name;return"string"!=typeof e||"string"!=typeof t||this.$isEmpty(t)?null:this.getUserPref(t.replace(C,"_")+"_"+e)}})},$=Object(m.a)(O,void 0,void 0,!1,null,null,null).exports},uHGB:function(e,t,a){var n=a("ZlJl");"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,i);n.locals&&(e.exports=n.locals)},vIf3:function(e,t,a){"use strict";a("zcTV")},yP2Y:function(e,t,a){var n=a("iHd1");"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,i);n.locals&&(e.exports=n.locals)},zcTV:function(e,t,a){var n=a("Ypge");"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,i);n.locals&&(e.exports=n.locals)}}]);